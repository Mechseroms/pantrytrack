from dataclasses import dataclass, field
import json
from database import lst2pgarr

@dataclass
class LogisticsInfoPayload:
    barcode: str
    primary_location: str
    auto_issue_location: str
    dynamic_locations: dict = field(default_factory=dict)
    location_data: dict = field(default_factory=dict)
    quantity_on_hand: float = 0.0
    
    def payload(self):
        if self.barcode or self.primary_location or self.auto_issue == None:
            raise Exception("have to set values")
        return (self.barcode, self.primary_location, self.auto_issue_location,
                json.dumps(self.dynamic_locations), json.dumps(self.location_data),
                self.quantity_on_hand)
